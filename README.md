# Global Bangla Competition Platform

Full-stack Node.js + MySQL application that powers a student competition portal along with an admin console.

## Tech Stack
- **Backend**: Express, MySQL, express-session, multer, Razorpay, Nodemailer
- **Frontend**: HTML/CSS/JavaScript (separate `/user-site` and `/admin-site`)
- **Deployment**: Railway with GitHub integration

## Local Development

1. **Install dependencies**
   ```bash
   npm install
   ```

2. **Set up environment variables**
   ```bash
   cp .env.example .env
   # Update .env with your local database settings
   ```

3. **Initialize database**
   ```bash
   node setup-database.js
   ```

4. **Start development server**
   ```bash
   npm run dev
   ```

5. **Access locally**
   - Student site: `http://localhost:5000/`
   - Admin site: `http://localhost:5000/admin/`

## Railway Deployment

### Prerequisites
- GitHub account
- Railway account
- This repository pushed to GitHub

### Deployment Steps

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Ready for Railway deployment"
   git push origin main
   ```

2. **Connect to Railway**
   - Go to [railway.app](https://railway.app)
   - Click "New Project" → "Deploy from GitHub repo"
   - Select this repository
   - Railway will automatically detect the Node.js application

3. **Configure Environment Variables**
   In Railway dashboard, set these variables:
   ```
   PORT=5000
   DB_HOST=mysql.railway.internal
   DB_USER=root
   DB_PASSWORD={auto-generated by Railway}
   DB_NAME=railway
   SESSION_SECRET={generate a secure secret}
   EMAIL_HOST=smtp.example.com
   EMAIL_PORT=587
   EMAIL_SECURE=false
   EMAIL_USER=no-reply@example.com
   EMAIL_PASSWORD={your email password}
   RAZORPAY_KEY_ID={your Razorpay key}
   RAZORPAY_KEY_SECRET={your Razorpay secret}
   BASE_URL=https://your-app-name.railway.app
   ADMIN_INVITE_CODE=globalbangla12
   ```

4. **Deploy**
   - Railway will automatically deploy on each push to main branch
   - Your app will be available at `https://your-app-name.railway.app`

### Database Setup on Railway
- Railway automatically provisions a MySQL database
- The database schema is set up automatically via the `setup-database.js` script
- No manual database creation required

## Admin Setup
Create an admin user after deployment:
1. Visit `https://your-app-name.railway.app/admin/`
2. Use the admin invite code: `globalbangla12`
3. Create your admin account

## Features
- User registration and authentication
- Competition submissions (handwriting, quiz, essay)
- Admin dashboard for managing competitions
- Payment integration with Razorpay
- File upload system
- Email notifications

## Project Structure
```
├── src/
│   ├── config/          # Database configuration
│   ├── controllers/     # Application logic
│   ├── middleware/      # Authentication and upload middleware
│   ├── routes/          # API routes
│   └── server.js        # Main server file
├── user-site/           # Frontend for users
├── admin-site/          # Frontend for admins
├── uploads/             # File upload directory
├── railway.toml         # Railway configuration
├── nixpacks.toml        # Build configuration
└── package.json         # Dependencies and scripts
```
